{"version":3,"file":"pdfembed.min.js","sources":["../src/pdfembed.js"],"sourcesContent":["// This file is part of the mod_coursecertificate plugin for Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This module provides functionality for embedding PDFs using pdf.js.\n *\n * @module      mod_datalynx/pdfembed\n * @copyright   2023 David Bogner <david.bogner@wunderbyte.at>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {pdfjsLib} from 'pdf';\n// eslint-disable-next-line no-console\nconsole.log(pdfjsLib);\ndefine(['mod_datalynx/pdf'], function (pdfjsLib) {\n    var MyPDFModule = {\n        renderPDF: function (pdfUrl, containerId) {\n            pdfjsLib.getDocument(pdfUrl).promise.then(function (pdf) {\n                pdf.getPage(1).then(function (page) {\n                    var scale = 1.5; // Adjust the scale as needed.\n                    var viewport = page.getViewport({ scale: scale });\n                    var canvas = document.createElement('canvas');\n                    var context = canvas.getContext('2d');\n                    canvas.height = viewport.height;\n                    canvas.width = viewport.width;\n\n                    var renderContext = {\n                        canvasContext: context,\n                        viewport: viewport,\n                    };\n\n                    page.render(renderContext).promise.then(function () {\n                        var container = document.getElementById(containerId);\n                        container.appendChild(canvas);\n                    });\n                });\n            });\n        }\n    };\n    return MyPDFModule;\n});"],"names":["console","log","pdfjsLib","define","renderPDF","pdfUrl","containerId","getDocument","promise","then","pdf","getPage","page","viewport","getViewport","scale","canvas","document","createElement","context","getContext","height","width","renderContext","canvasContext","render","getElementById","appendChild"],"mappings":";;;;;;;GAwBAA,QAAQC,IAAIC,UACZC,+BAAO,CAAC,qBAAqB,SAAUD,gBACjB,CACdE,UAAW,SAAUC,OAAQC,aACzBJ,SAASK,YAAYF,QAAQG,QAAQC,MAAK,SAAUC,KAChDA,IAAIC,QAAQ,GAAGF,MAAK,SAAUG,UAEtBC,SAAWD,KAAKE,YAAY,CAAEC,MADtB,MAERC,OAASC,SAASC,cAAc,UAChCC,QAAUH,OAAOI,WAAW,MAChCJ,OAAOK,OAASR,SAASQ,OACzBL,OAAOM,MAAQT,SAASS,UAEpBC,cAAgB,CAChBC,cAAeL,QACfN,SAAUA,UAGdD,KAAKa,OAAOF,eAAef,QAAQC,MAAK,WACpBQ,SAASS,eAAepB,aAC9BqB,YAAYX"}