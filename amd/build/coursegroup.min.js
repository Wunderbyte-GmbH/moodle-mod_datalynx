define("mod_datalynx/coursegroup",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;var _default={init(options){const{coursefield:coursefield,groupfield:groupfield,acturl:actionurl}=options;document.getElementById("id_".concat(groupfield)).addEventListener("change",(function(){const selectedValue=document.querySelector("#id_".concat(groupfield," option:checked")).value;document.getElementById("id_".concat(groupfield,"id")).value=selectedValue})),document.getElementById("id_".concat(coursefield)).addEventListener("change",(function(){const groupSelect=document.getElementById("id_".concat(groupfield)),selectedCourseId=document.querySelector("#id_".concat(coursefield," option:checked")).value;return groupSelect.innerHTML="","0"!==selectedCourseId?fetch(actionurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"courseid=".concat(selectedCourseId)}).then((response=>response.text())).then((data=>(data&&data.split(",").forEach((group=>{const value=group.split(" ",1)[0],option=document.createElement("option");option.value=value,option.textContent=group,groupSelect.appendChild(option)})),null))).catch((()=>{throw new Error("Group loading failed")})):Promise.resolve()}))}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=coursegroup.min.js.map