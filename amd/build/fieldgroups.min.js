define(["jquery"],function(a){return{init:function(b,c,d,e,f){d++;for(var g=d;g<=e;g++)a("div[data-field-name='"+b+"'] [data-line='"+g+"']").hide();a("div.datalynx-field-wrapper #id_addline").click(function(b){b.preventDefault();for(var d=a(this).closest(".datalynx-field-wrapper").find("[data-line]:hidden:first"),e=d.data("line"),f=a("input[name=deletedlines_"+c+"]").val(),g=f.split(","),h=0;h<g.length;h++)g[h]==e&&(g.splice(h,1),f=g.join(","));a("input[name=deletedlines_"+c+"]").val(f),d.show()}),a("div[data-field-name='"+b+"'] [data-removeline]").each(function(){a(this).off("click"),a(this).click(function(b){b.preventDefault();var d=a(this).closest(".lines"),g=d.data("line"),h=d.closest(".datalynx-field-wrapper"),i=h.find(".lines:visible").last(),j=i.data("line");if(d.find(".fp-file").each(function(){a(this).click(),a(".fp-file-delete:visible").trigger("click"),a(".fp-dlg-butconfirm:visible").trigger("click")}),a(this).closest(".lines").find("input").each(function(){a(this).val("")}),a(this).closest(".lines").find("[id$=enabled]:checked, .form-autocomplete-selection .tag").each(function(){a(this).trigger("click")}),a(this).closest(".lines").find(".editor_atto_content").each(function(){a(this).html("")}),a(this).closest(".lines").find("textarea").each(function(){a(this).val("")}),g>f&&g>=1){d.hide(),g!=e&&h.find("[data-line]").each(function(){if(a(this).data("line")>g&&a(this).data("line")<=j){var b=a(this).data("line")-1;a(this).attr("data-line",b)}a(this).data("line")==g&&a(this).attr("data-line",j)});var k=[];h.find("[data-line]").each(function(){k[a(this).data("line")]=a(this)}),h.remove(".lines");for(var l=k.length;l>=0;l--)h.prepend(k[l])}var m=a("input[name=deletedlines_"+c+"]").val();""!=m&&(m+=","),a("input[name=deletedlines_"+c+"]").val(m+g)})})}}});