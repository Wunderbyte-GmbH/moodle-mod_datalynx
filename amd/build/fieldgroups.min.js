define(["jquery"],function(a){return{init:function(b,c,d,e){c++;for(var f=c;f<=d;f++)a("div[data-field-name='"+b+"'] [data-line='"+f+"']").hide();a("div.datalynx-field-wrapper #id_addline").click(function(b){b.preventDefault(),a(this).closest(".datalynx-field-wrapper").find("[data-line]:hidden:first").show()}),a("div[data-field-name='"+b+"'] [data-removeline]").each(function(){a(this).off("click"),a(this).click(function(b){b.preventDefault();var c=a(this).closest(".lines"),f=c.data("line"),g=c.closest(".datalynx-field-wrapper"),h=g.find(".lines:visible").last(),i=h.data("line");if(c.find(".fp-file").each(function(){a(this).click(),a(".fp-file-delete:visible").trigger("click"),a(".fp-dlg-butconfirm:visible").trigger("click")}),a(this).closest(".lines").find("input").each(function(){"hidden"!=a(this).attr("type")&&a(this).val("")}),a(this).closest(".lines").find(".editor_atto_content").each(function(){a(this).html("")}),a(this).closest(".lines").find("textarea").each(function(){a(this).val("")}),a(this).closest(".lines").find("select").each(function(){a(this).find('option[value=""]').prop("selected",!0)}),a(this).closest(".lines").find("[id$=enabled]:checked, .form-autocomplete-selection .tag").each(function(){a(this).trigger("click")}),f>e&&f>=1){c.hide(),f!=d&&g.find("[data-line]").each(function(){if(a(this).data("line")>f&&a(this).data("line")<=i){var b=a(this).data("line")-1;a(this).attr("data-line",b)}a(this).data("line")==f&&a(this).attr("data-line",i)});var j=[];g.find("[data-line]").each(function(){j[a(this).data("line")]=a(this)}),g.remove(".lines");for(var k=j.length;k>=0;k--)g.prepend(j[k])}})})}}});