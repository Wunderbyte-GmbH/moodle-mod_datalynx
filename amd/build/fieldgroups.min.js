define("mod_datalynx/fieldgroups",["jquery"],(function($){return{init:function(fieldgroupname,defaultlines,maxlines,requiredlines,fieldgroup){for(var line=++defaultlines;line<=maxlines;line++)$("div[data-field-name='"+fieldgroupname+"'] [data-line='"+line+"']").hide();$("div.datalynx-field-wrapper #id_addline").click((function(e){e.preventDefault(),$(this).closest(".datalynx-field-wrapper").find("[data-line]:hidden:first").show(),$("input[name="+fieldgroup+"_lastvisible]").val()<maxlines&&$("input[name="+fieldgroup+"_lastvisible]").get(0).value++})),$("div[data-field-name='"+fieldgroupname+"'] [data-removeline]").each((function(){$(this).off("click"),$(this).click((function(e){e.preventDefault();var thisline=$(this).closest(".lines"),lineid=thisline.data("line"),parentcontainer=thisline.closest(".datalynx-field-wrapper"),lastvisiblelineid=parentcontainer.find(".lines:visible").last().data("line");if(thisline.find(".fp-file").each((function(){$(this).click(),$(".fp-file-delete:visible").trigger("click"),$(".fp-dlg-butconfirm:visible").trigger("click")})),$(this).closest(".lines").find("input").each((function(){"hidden"!=$(this).attr("type")&&$(this).val("")})),$(this).closest(".lines").find(".editor_atto_content").each((function(){$(this).html("")})),$(this).closest(".lines").find("textarea").each((function(){$(this).val("")})),$(this).closest(".lines").find("select").each((function(){$(this).find('option[value=""]').prop("selected",!0)})),$(this).closest(".lines").find("[id$=enabled]:checked, .form-autocomplete-selection .tag").each((function(){$(this).trigger("click")})),$("input[name="+fieldgroup+"_lastvisible]").get(0).value--,lineid>requiredlines&&lineid>=1){thisline.hide(),lineid!=maxlines&&parentcontainer.find("[data-line]").each((function(){if($(this).data("line")>lineid&&$(this).data("line")<=lastvisiblelineid){var newid=$(this).data("line")-1;$(this).attr("data-line",newid)}$(this).data("line")==lineid&&$(this).attr("data-line",lastvisiblelineid)}));var newcontentorder=[];parentcontainer.find("[data-line]").each((function(){newcontentorder[$(this).data("line")]=$(this)})),parentcontainer.remove(".lines");for(var i=newcontentorder.length;i>=0;i--)parentcontainer.prepend(newcontentorder[i])}}))}))}}}));

//# sourceMappingURL=fieldgroups.min.js.map