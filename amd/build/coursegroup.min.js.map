{"version":3,"file":"coursegroup.min.js","sources":["../src/coursegroup.js"],"sourcesContent":["define(['jquery'], function($) {\n\n    return {\n        init: function(options) {\n            var coursefield = options.coursefield;\n            var groupfield = options.groupfield;\n            var actionurl = options.acturl; // Points to loadgroups.php.\n\n            // Read groupid from second select and enter in input field.\n            $(\"#id_\"+groupfield).on( \"change\", function () {\n                $(\"#id_\"+groupfield + 'id').val($( \"#id_\"+groupfield+\" option:selected\" ).val());\n            });\n\n            // Read courseid and call ajax at change to receive all groups in course.\n            $(\"#id_\"+coursefield).on( \"change\", function () {\n                var group = $( \"#id_\"+groupfield ); // Get group select.\n                var courseid =  $( \"#id_\"+coursefield+\" option:selected\" ).val(); // Get the courseid.\n                group.find('option').remove().end(); // Remove current options.\n\n                // Load groups from course.\n                if (courseid != 0) {\n                    // Ajax request to get current options.\n                    $.ajax(\n                        {\n                            method: \"POST\",\n                            url: actionurl,\n                            data: 'courseid=' + courseid,\n                            context: this,\n                            dataType: \"text\",\n                            success: function(data) {\n                                if (data != '') {\n                                    // Add Group to options, value is groupid.\n                                    $.each(data.split(','), function(key, value) {\n                                        group.append($(\"<option></option>\").attr(\"value\",value.split(\" \",1)).text(value));\n                                    });\n                                }\n                            },\n                            error: function() {\n                                alert(\"Error\");\n                            }\n                        }\n                    );\n                }\n            }); // End on change _course.\n        }\n    };\n});\n"],"names":["define","$","init","options","coursefield","groupfield","actionurl","acturl","on","val","group","courseid","find","remove","end","ajax","method","url","data","context","this","dataType","success","each","split","key","value","append","attr","text","error","alert"],"mappings":"AAAAA,kCAAO,CAAC,WAAW,SAASC,SAEjB,CACHC,KAAM,SAASC,aACPC,YAAcD,QAAQC,YACtBC,WAAaF,QAAQE,WACrBC,UAAYH,QAAQI,OAGxBN,EAAE,OAAOI,YAAYG,GAAI,UAAU,WAC/BP,EAAE,OAAOI,WAAa,MAAMI,IAAIR,EAAG,OAAOI,WAAW,oBAAqBI,UAI9ER,EAAE,OAAOG,aAAaI,GAAI,UAAU,eAC5BE,MAAQT,EAAG,OAAOI,YAClBM,SAAYV,EAAG,OAAOG,YAAY,oBAAqBK,MAC3DC,MAAME,KAAK,UAAUC,SAASC,MAGd,GAAZH,UAEAV,EAAEc,KACE,CACIC,OAAQ,OACRC,IAAKX,UACLY,KAAM,YAAcP,SACpBQ,QAASC,KACTC,SAAU,OACVC,QAAS,SAASJ,MACF,IAARA,MAEAjB,EAAEsB,KAAKL,KAAKM,MAAM,MAAM,SAASC,IAAKC,OAClChB,MAAMiB,OAAO1B,EAAE,qBAAqB2B,KAAK,QAAQF,MAAMF,MAAM,IAAI,IAAIK,KAAKH,YAItFI,MAAO,WACHC,MAAM"}