{"version":3,"file":"dynamicfilter.min.js","sources":["../src/dynamicfilter.js"],"sourcesContent":["define(['core_form/dynamicform', 'core/toast'], (DynamicForm, Toast) => {\n    const init = () => {\n        const container = document.querySelector('#formcontainer');\n        if (!container) {\n            return;\n        }\n\n        const dynamicForm = new DynamicForm(container, 'mod_datalynx_filter_form');\n\n        dynamicForm.addEventListener(dynamicForm.events.FORM_SUBMITTED, (e) => {\n            e.detail.good.forEach(successMessage => {\n                Toast.add(successMessage, { type: 'success' });\n            });\n            e.detail.bad.forEach(errorMessage => {\n                Toast.add(errorMessage, { type: 'danger' });\n            });\n\n            const searchParams = new URLSearchParams(window.location.search);\n            dynamicForm.load({\n                d: searchParams.get('d'),\n                fid: searchParams.get('fid')\n            });\n        });\n\n        container.addEventListener('change', (e) => {\n            if (e.target.matches('.custom-select') && (e.target.name.startsWith('searchfield')\n                || e.target.name.startsWith('sortfield'))) {\n                e.preventDefault();\n                document.getElementsByName('refreshonly')[0].value = '1';\n                dynamicForm.submitFormAjax();\n            }\n        });\n\n        container.addEventListener('click', (e) => {\n            if (e.target.matches('input[type=\"submit\"]')) {\n                e.preventDefault();\n                document.getElementsByName('refreshonly')[0].value = '0';\n                dynamicForm.submitFormAjax();\n            }\n        });\n\n        // Initialize form loading on page load.\n        document.addEventListener('DOMContentLoaded', () => {\n            const searchParams = new URLSearchParams(window.location.search);\n            dynamicForm.load({\n                d: searchParams.get('d'),\n                fid: searchParams.get('fid')\n            });\n        });\n    };\n\n    return {\n        init\n    };\n});"],"names":["define","DynamicForm","Toast","init","container","document","querySelector","dynamicForm","addEventListener","events","FORM_SUBMITTED","e","detail","good","forEach","successMessage","add","type","bad","errorMessage","searchParams","URLSearchParams","window","location","search","load","d","get","fid","target","matches","name","startsWith","preventDefault","getElementsByName","value","submitFormAjax"],"mappings":"AAAAA,oCAAO,CAAC,wBAAyB,eAAe,CAACC,YAAaC,SAmDnD,CACHC,KAnDS,WACHC,UAAYC,SAASC,cAAc,sBACpCF,uBAICG,YAAc,IAAIN,YAAYG,UAAW,4BAE/CG,YAAYC,iBAAiBD,YAAYE,OAAOC,gBAAiBC,IAC7DA,EAAEC,OAAOC,KAAKC,SAAQC,iBAClBb,MAAMc,IAAID,eAAgB,CAAEE,KAAM,eAEtCN,EAAEC,OAAOM,IAAIJ,SAAQK,eACjBjB,MAAMc,IAAIG,aAAc,CAAEF,KAAM,oBAG9BG,aAAe,IAAIC,gBAAgBC,OAAOC,SAASC,QACzDjB,YAAYkB,KAAK,CACbC,EAAGN,aAAaO,IAAI,KACpBC,IAAKR,aAAaO,IAAI,YAI9BvB,UAAUI,iBAAiB,UAAWG,IAC9BA,EAAEkB,OAAOC,QAAQ,oBAAsBnB,EAAEkB,OAAOE,KAAKC,WAAW,gBAC7DrB,EAAEkB,OAAOE,KAAKC,WAAW,gBAC5BrB,EAAEsB,iBACF5B,SAAS6B,kBAAkB,eAAe,GAAGC,MAAQ,IACrD5B,YAAY6B,qBAIpBhC,UAAUI,iBAAiB,SAAUG,IAC7BA,EAAEkB,OAAOC,QAAQ,0BACjBnB,EAAEsB,iBACF5B,SAAS6B,kBAAkB,eAAe,GAAGC,MAAQ,IACrD5B,YAAY6B,qBAKpB/B,SAASG,iBAAiB,oBAAoB,WACpCY,aAAe,IAAIC,gBAAgBC,OAAOC,SAASC,QACzDjB,YAAYkB,KAAK,CACbC,EAAGN,aAAaO,IAAI,KACpBC,IAAKR,aAAaO,IAAI"}