{"version":3,"file":"behavior.min.js","sources":["../src/behavior.js"],"sourcesContent":["define(['jquery'], function($) {\n\n    return {\n        init: function() {\n            $('img[data-for]').on( \"click\", function ( event ) {\n\n                var img = event.target;\n                var behaviorid = img.getAttribute('data-behavior-id');\n                var permissionid = img.getAttribute('data-permission-id');\n                var forproperty = img.getAttribute('data-for');\n                var sesskey = $('table.datalynx-behaviors').attr('data-sesskey'); // Maybe M.cfg.sesskey.\n                var actionurl = \"behavior_edit_ajax.php\";\n\n\n                // This was in javascript-static.js in lib.\n                var obj = {\n                                behaviorid: behaviorid,\n                                permissionid: permissionid,\n                                forproperty: forproperty,\n                                sesskey: sesskey\n                            };\n\n                var list = [];\n                for(var k in obj) {\n                    k = encodeURIComponent(k);\n                    var value = obj[k];\n                    if(obj[k] instanceof Array) {\n                        for(var i in value) {\n                            list.push(k+'[]='+encodeURIComponent(value[i]));\n                        }\n                    } else {\n                        list.push(k+'='+encodeURIComponent(value));\n                    }\n                }\n                obj = list.join('&');\n\n                // Ajax request to get current options.\n                $.ajax(\n                    {\n                        method: \"POST\",\n                        timeout: 5000,\n                        url: actionurl,\n                        data: obj,\n                        context: this,\n                        dataType: \"text\",\n                        success: function(data) {\n                            if (data != '') {\n                                // console.log(\"RAW JSON DATA: \" + data);\n                                var src = img.getAttribute(\"src\");\n                                if (src.search(\"-enabled\") !== -1) {\n                                    src = src.replace(\"-enabled\", \"-n\");\n                                } else {\n                                    src = src.replace(\"-n\", \"-enabled\");\n                                }\n                                img.setAttribute(\"src\", src);\n                            }\n                        },\n                        error: function() {\n                            alert(\"Error\");\n                        }\n                    }\n                );\n\n\n            });\n        }\n    };\n});\n"],"names":["define","$","init","on","event","img","target","obj","behaviorid","getAttribute","permissionid","forproperty","sesskey","attr","list","k","value","encodeURIComponent","Array","i","push","join","ajax","method","timeout","url","data","context","this","dataType","success","src","search","replace","setAttribute","error","alert"],"mappings":"AAAAA,+BAAO,CAAC,WAAW,SAASC,SAEjB,CACHC,KAAM,WACFD,EAAE,iBAAiBE,GAAI,SAAS,SAAWC,WAEnCC,IAAMD,MAAME,OASZC,IAAM,CACMC,WATCH,IAAII,aAAa,oBAUlBC,aATGL,IAAII,aAAa,sBAUpBE,YATEN,IAAII,aAAa,YAUnBG,QATFX,EAAE,4BAA4BY,KAAK,iBAY7CC,KAAO,OACP,IAAIC,KAAKR,IAAK,KAEVS,MAAQT,IADZQ,EAAIE,mBAAmBF,OAEpBR,IAAIQ,aAAcG,UACb,IAAIC,KAAKH,MACTF,KAAKM,KAAKL,EAAE,MAAME,mBAAmBD,MAAMG,UAG/CL,KAAKM,KAAKL,EAAE,IAAIE,mBAAmBD,QAG3CT,IAAMO,KAAKO,KAAK,KAGhBpB,EAAEqB,KACE,CACIC,OAAQ,OACRC,QAAS,IACTC,IA9BQ,yBA+BRC,KAAMnB,IACNoB,QAASC,KACTC,SAAU,OACVC,QAAS,SAASJ,SACF,IAARA,KAAY,KAERK,IAAM1B,IAAII,aAAa,OAEvBsB,KAD4B,IAA5BA,IAAIC,OAAO,YACLD,IAAIE,QAAQ,WAAY,MAExBF,IAAIE,QAAQ,KAAM,YAE5B5B,IAAI6B,aAAa,MAAOH,OAGhCI,MAAO,WACHC,MAAM"}