define(["jquery"],function(a){return{init:function(b){var c=b.dffield,d=b.viewfield,e=b.textfieldfield,f=b.acturl,g=b.presentdlid,h=b.thisfieldstring,i=b.update,j=b.fieldtype;a("#id_"+c).on("change",function(){var b=a("#id_"+d),c=a("#id_"+e),k=a(this).val();b&&b.find("option").remove().end(),c&&c.find("option").remove().end(),0!=k&&a.ajax({method:"POST",url:f,data:"dfid="+k,context:this,dataType:"text",success:function(d){if(""!=d){var e=d.split("#");if(b)for(var f=e[0].split(","),l=0;l<f.length;++l){var m=f[l].trim().split(" "),n=m.shift(),o=m.join(" ");b.append(a("<option></option>").attr("value",n).text(o))}if(c){var p=e[1].split(",");k==g&&0==i&&"text"==j&&c.append(a("<option></option>").attr("value","-1").text(h));for(var l=0;l<p.length;++l){var m=p[l].trim().split(" "),n=m.shift(),o=m.join(" ");c.append(a("<option></option>").attr("value",n).text(o))}}}},error:function(){alert("Error while loading views and textfields.")}})})}}});