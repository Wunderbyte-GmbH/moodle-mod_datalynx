define("mod_datalynx/behavior",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;var _default={init(){document.querySelectorAll("img[data-for]").forEach((img=>{img.addEventListener("click",(event=>{var _document$querySelect;const clickedImg=event.target,obj={behaviorid:clickedImg.getAttribute("data-behavior-id"),permissionid:clickedImg.getAttribute("data-permission-id"),forproperty:clickedImg.getAttribute("data-for"),sesskey:(null===(_document$querySelect=document.querySelector("table.datalynx-behaviors"))||void 0===_document$querySelect?void 0:_document$querySelect.getAttribute("data-sesskey"))||M.cfg.sesskey},list=Object.keys(obj).map((k=>{const encodedKey=encodeURIComponent(k),value=obj[k];return Array.isArray(value)?value.map((v=>"".concat(encodedKey,"[]=").concat(encodeURIComponent(v)))).join("&"):"".concat(encodedKey,"=").concat(encodeURIComponent(value))})).join("&"),controller=new AbortController,timeoutId=setTimeout((()=>controller.abort()),5e3);fetch("behavior_edit_ajax.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:list,signal:controller.signal}).then((response=>(clearTimeout(timeoutId),response.text()))).then((data=>{if(""!==data){let src=clickedImg.getAttribute("src");src.includes("-enabled")?src=src.replace("-enabled","-n"):src.includes("-n")&&(src=src.replace("-n","-enabled")),clickedImg.setAttribute("src",src)}return!0})).catch((err=>{throw err}))}))}))}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=behavior.min.js.map