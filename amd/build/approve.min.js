define("mod_datalynx/approve",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0;var _default={init(approvedIcon,disapprovedIcon){document.querySelectorAll(".datalynxfield__approve").forEach((element=>{const href=element.href,params=extractParams(href.split("?")[1]);element.addEventListener("click",(e=>{e.preventDefault();fetch("field/_approve/ajax.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(params)}).then((response=>{if(!response.ok)throw new Error("HTTP error! Status: ".concat(response.status));return response.json()})).then((data=>{const imgElement=element.querySelector("img");return data&&imgElement.classList.contains("approved")?(imgElement.classList.remove("approved"),imgElement.src=disapprovedIcon,imgElement.alt="approve",imgElement.title="approve",params.action="approve"):data&&!imgElement.classList.contains("approved")&&(imgElement.classList.add("approved"),imgElement.src=approvedIcon,imgElement.alt="disapprove",imgElement.title="disapprove",params.action="disapprove"),null})).catch((error=>{throw error}))}))}));const extractParams=paramString=>{const params=new URLSearchParams(paramString),output={};for(const[key,value]of params.entries())output[key]=value;return"approve"in output?(output.entryid=output.approve,output.action="approve"):"disapprove"in output?(output.entryid=output.disapprove,output.action="disapprove"):(output.entryid=output.approve,output.action="approve"),output}}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=approve.min.js.map