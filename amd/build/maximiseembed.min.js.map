{"version":3,"file":"maximiseembed.min.js","sources":["../src/maximiseembed.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    mod_datalynx\n * @author     David Bogner\n * @copyright  2023 Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Modal form to manage booking option tags (botags).\n *\n * @module     mod_datalynx/maximiseembed\n * @copyright  2023 Wunderbyte GmbH\n * @author     David Bogner\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport const initMaximisedEmbed = (id) => {\n    const obj = document.querySelector(`#${id}`);\n    if (!obj) {\n        return;\n    }\n\n    const getHtmlElementSize = (el, prop) => {\n        if (typeof el === 'string') {\n            el = document.querySelector(`#${el}`);\n        }\n        // Ensure element exists.\n        if (el) {\n            let val = getComputedStyle(el).getPropertyValue(prop);\n            if (val === 'auto') {\n                val = getComputedStyle(el).getPropertyValue(prop);\n            }\n            val = parseInt(val, 10);\n            if (isNaN(val)) {\n                return 0;\n            }\n            return val;\n        } else {\n            return 0;\n        }\n    };\n\n    const resizeObject = () => {\n        obj.style.display = 'none';\n        const newWidth = getHtmlElementSize('maincontent', 'width') - 35;\n\n        if (newWidth > 500) {\n            obj.style.width = `${newWidth}px`;\n        } else {\n            obj.style.width = '500px';\n        }\n\n        const header = document.querySelector('#page-header');\n        const footer = document.querySelector('#page-footer');\n\n        const headerHeight = getHtmlElementSize(header, 'height');\n        const footerHeight = getHtmlElementSize(footer, 'height');\n        const newHeight = document.body.scrollHeight - footerHeight - headerHeight - 100;\n        if (newHeight < 400) {\n            newHeight = 400;\n        }\n        obj.style.height = `${newHeight}px`;\n        obj.style.display = '';\n    };\n\n    resizeObject();\n\n    // Fix layout if window resized too\n    window.addEventListener('resize', resizeObject);\n};"],"names":["id","obj","document","querySelector","getHtmlElementSize","el","prop","val","getComputedStyle","getPropertyValue","parseInt","isNaN","resizeObject","style","display","newWidth","width","header","footer","headerHeight","footerHeight","newHeight","body","scrollHeight","height","window","addEventListener"],"mappings":"2LA+BmCA,WACzBC,IAAMC,SAASC,yBAAkBH,SAClCC,iBAICG,mBAAqB,CAACC,GAAIC,WACV,iBAAPD,KACPA,GAAKH,SAASC,yBAAkBE,MAGhCA,GAAI,KACAE,IAAMC,iBAAiBH,IAAII,iBAAiBH,YACpC,SAARC,MACAA,IAAMC,iBAAiBH,IAAII,iBAAiBH,OAEhDC,IAAMG,SAASH,IAAK,IAChBI,MAAMJ,KACC,EAEJA,WAEA,GAITK,aAAe,KACjBX,IAAIY,MAAMC,QAAU,aACdC,SAAWX,mBAAmB,cAAe,SAAW,GAG1DH,IAAIY,MAAMG,MADVD,SAAW,cACUA,eAEH,cAGhBE,OAASf,SAASC,cAAc,gBAChCe,OAAShB,SAASC,cAAc,gBAEhCgB,aAAef,mBAAmBa,OAAQ,UAC1CG,aAAehB,mBAAmBc,OAAQ,UAC1CG,UAAYnB,SAASoB,KAAKC,aAAeH,aAAeD,aAAe,IACzEE,UAAY,MACZA,UAAY,KAEhBpB,IAAIY,MAAMW,iBAAYH,gBACtBpB,IAAIY,MAAMC,QAAU,IAGxBF,eAGAa,OAAOC,iBAAiB,SAAUd"}